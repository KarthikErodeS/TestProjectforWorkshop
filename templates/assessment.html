{% extends 'base.html' %}
{% block title %}Python Assessment{% endblock %}
{% block content %}
<h2 class="text-center mb-4">Python Coding Assessment</h2>
<form method="post" action="/submit">
    {% for q in questions %}
    <div class="mb-4 question-card">
        <div class="fw-bold mb-2">{{ loop.index }}. {{ q.question }}</div>
        {% set q_idx = loop.index %}
        {% set correct_count = q.choices | selectattr('is_correct') | list | length %}
        {% if correct_count > 1 %}
            {# Multi-select: use checkboxes #}
            {% for choice in q.choices %}
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="answers{{ q_idx }}" value="{{ choice.text }}" id="q{{ q_idx }}_{{ loop.index }}">
                <label class="form-check-label" for="q{{ q_idx }}_{{ loop.index }}">{{ choice.text }}</label>
            </div>
            {% endfor %}
        {% else %}
            {# Single-select: use radio #}
            {% for choice in q.choices %}
            <div class="form-check">
                <input class="form-check-input" type="radio" name="answers{{ q_idx }}" value="{{ choice.text }}" id="q{{ q_idx }}_{{ loop.index }}" required>
                <label class="form-check-label" for="q{{ q_idx }}_{{ loop.index }}">{{ choice.text }}</label>
            </div>
            {% endfor %}
        {% endif %}
    </div>
    {% endfor %}
    <div class="d-grid">
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>
</form>
{% endblock %}
